# 고정 소수점과 부동 소수점

> https://www.secmem.org/blog/2020/05/15/float/

## 고정 소수점(fixed-point)

* 일반적인 소수 표기 
* 특정 위치를 기준으로 왼쪽은 정수부, 오른쪽은 소수부
* 범위 내의 모든 수를 오차 없이 정확하게 표현 가능
* 정수형과 같은 방법으로 계산할 수 있음
* 표현 범위가 매우 작다는 단점
  * 본래 10자리를 표현할 수 있던 자료형의 5자리를 떼어 소수부에 나눠준다면 그 자료형이 표현할 수 있는 수의 범위는 정수부 기준으로 다섯 자리밖에 되지 않는다

## 부동 소수점

* 고정 소수점의 단점을 보완하기 위한 자료형
* 값을 표현하는 데에 실제로 의미가 있는 숫자들을 모으고 거기에 다른 수를 곱하여 그 값의 실제 크기를 표현하는 방식
  * C 계열 언어에서 10진수에 이러한 표기를 사용하는데
  * 1e9 = 10^9
* 가수부와 지수부
* 가수부 - 유효숫자들이 들어가는 부분
* 지수부 - 10^n의 n이 들어가는 부분. 당연히 컴퓨터에서는 2^n의 n

* 전체 공간의 상당한 부분을 지수부에 떼어 주었기 때문에 그만큼 표현할 수 있는 유효숫자의 개수가 줄어듦


### 123.45를 부동 소수점 표현으로 나타내기

float - 32bit, IEEE 표준에 의해 bias 127

double - 64bit, bias 1023

1bit - 부호(양수일 경우 0, 음수일 경우 1)

8bit - 지수부

23bit - 가수부

먼저, 123.45 를 이진수로 표현

1111011.011100110011001100.........

정수부가 1이 되도록 소수점을 옮겨 준다. (1.xxxx * 2^n 의 형태로 정규화하기 위함)

1.111011011100110011001100........

이때 소수점을 옮긴 자리 수 만큼이 지수부가 된다. (여기선 n = 6)

따라서 부호 비트 (0), 지수부 비트(bias + n = 6 + 127 = 133 = 10000101), 가수부 비트(11101101110011001100110, 23비트만 사용하고 뒤는 자른다. 여기서 오차 발생)

결과는

| 0    | 1    | 0    | 0    | 0    | 0    | 1    | 0    | 1    | 1    | 1    | 1    | 0    | 1    | 1    | 0    | 1    | 1    | 1    | 0    | 0    | 1    | 1    | 0    | 0    | 1    | 1    | 0    | 0    | 1    | 1    | 0    |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| 1    |      |      |      |      |      |      |      | 8    |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      | 23   |

와 같이 표현된다.





